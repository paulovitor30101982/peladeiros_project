{% load static %}

{% if reservas %}
    <div class="reservations-list">
        {% for reserva in reservas %}
        <div class="reserva-card status-{{ reserva.status }}">
            <div class="reserva-card-img">
                <img src="{{ reserva.espaco.foto.url }}" alt="{{ reserva.espaco.nome }}">
            </div>
            <div class="reserva-card-details">
                <h3>{{ reserva.espaco.nome }}</h3>
                <p><i class="fas fa-barcode"></i><strong>Cód. Reserva:</strong> {{ reserva.codigo_reserva|stringformat:".8s" }}</p>
                <p><i class="fas fa-calendar-alt"></i><strong>Data:</strong> {{ reserva.data_inicio|date:"d/m/Y" }}</p>
                <p><i class="fas fa-clock"></i><strong>Horário:</strong> {{ reserva.data_inicio|time:"H:i" }} - {{ reserva.data_fim|time:"H:i" }}</p>
                <p><i class="fas fa-calendar-check"></i><strong>Reservado em:</strong> {{ reserva.data_criacao|date:"d/m/Y às H:i" }}</p>

                {% if show_cancel_button %}
                <form action="{% url 'reservas:cancelar_reserva' reserva.id %}" method="POST" class="cancel-form" onsubmit="return confirm('Tem certeza que deseja cancelar esta reserva?');">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-danger">Cancelar Reserva</button>
                </form>
                {% endif %}
            </div>
            <div class="reserva-card-footer">
                <span class="reserva-price">R$ {{ reserva.preco_final }}</span>
                <span class="reserva-status">{{ reserva.get_status_display }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="no-reservas">
        <p>Nenhuma reserva encontrada nesta categoria.</p>
    </div>
{% endif %}